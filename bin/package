#!/usr/bin/env bash
set -euo pipefail && cd "$(dirname "${BASH_SOURCE[0]}")/.."

pipenv --rm
pipenv install
v_dir="$(pipenv --venv)"
sp_dir="$v_dir/lib/python2.7/site-packages"

tree "$sp_dir"

rm -rf third_party
mkdir -p third_party

rsync -rv \
      --exclude '*.pyc' \
      --exclude '*.so' \
      --exclude '*.dist-info' \
      --exclude '/wheel' \
      --exclude '/pip' \
      --exclude '/docutils' \
      --include '/botocore/data/*.json' \
      --include '/botocore/data/s3' \
      --include '/botocore/data/s3/**' \
      --exclude '/botocore/data/*' \
      --include '/boto3/data/*.json' \
      --include '/boto3/data/s3' \
      --exclude '/boto3/data/*' \
      "$sp_dir/" third_party/
